import{u as c,M as V,g as C,n as h,f as E,e as M,j as g,k as R}from"./proxy-BVJAYvbZ.js";import{r as n}from"./drei-BwRMWu1a.js";function A(t){const e=c(()=>C(t)),{isStatic:u}=n.useContext(V);if(u){const[,r]=n.useState(t);n.useEffect(()=>e.on("change",r),[])}return e}function I(t,e={}){const{isStatic:u}=n.useContext(V),r=n.useRef(null),a=c(()=>g(t)?t.get():t),i=c(()=>typeof a=="string"?a.replace(/[\d.-]/g,""):void 0),s=A(a),f=n.useRef(a),p=n.useRef(h),d=()=>{l(),r.current=R({keyframes:[S(s.get()),S(f.current)],velocity:s.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...e,onUpdate:p.current})},l=()=>{r.current&&r.current.stop()};return n.useInsertionEffect(()=>s.attach((o,m)=>u?m(o):(f.current=o,p.current=x=>m(y(x,i)),E.postRender(d),s.get()),l),[JSON.stringify(e)]),M(()=>{if(g(t))return t.on("change",o=>s.set(y(o,i)))},[s,i]),s}function y(t,e){return e?t+e:t}function S(t){return typeof t=="number"?t:parseFloat(t)}export{I as a,A as u};
